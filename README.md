# Monkey æµ‹è¯•æ—¥å¿—è®°å½•å·¥å…·

è¿™æ˜¯ä¸€ä¸ªç”¨äºŽæ‰§è¡Œ Android Monkey æµ‹è¯•å¹¶è‡ªåŠ¨è®°å½•å¸¦æ—¶é—´æˆ³æ—¥å¿—çš„ Python è„šæœ¬ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ðŸ“± æ‰§è¡Œ Monkey æµ‹è¯•å‘½ä»¤å¹¶å®žæ—¶æ•èŽ·è¾“å‡º
- â° è‡ªåŠ¨ä¸ºæ¯è¡Œæ—¥å¿—æ·»åŠ ç²¾ç¡®åˆ°æ¯«ç§’çš„æ—¶é—´æˆ³
- ðŸ’¾ è‡ªåŠ¨ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„æ—¥å¿—æ–‡ä»¶
- ðŸ”„ å®žæ—¶è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- ðŸŽ¯ æ”¯æŒè‡ªå®šä¹‰ Monkey å‘½ä»¤å‚æ•°

## çŽ¯å¢ƒè¦æ±‚

- Python 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬
- ADB (Android Debug Bridge) å·¥å…·
- Windows/Linux/macOS ç³»ç»Ÿ

## å®‰è£…ä¸Žé…ç½®

1. ç¡®ä¿å·²å®‰è£… Python 3
2. ç¡®ä¿ ADB å·²å®‰è£…å¹¶é…ç½®åˆ°ç³»ç»Ÿ PATH
3. å…‹éš†æˆ–ä¸‹è½½æ­¤è„šæœ¬åˆ°æœ¬åœ°

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•ï¼ˆä½¿ç”¨é»˜è®¤å‘½ä»¤ï¼‰

```bash
python monkey_logger.py 
```
### é»˜è®¤æ‰§è¡Œçš„ Monkey å‘½ä»¤

```bash
adb shell monkey -p com.bailunsi.zh_consumer_mall --pct-touch 30 --ignore-crashes --ignore-timeouts --pct-syskeys 0 --throttle 250 -s 2 -v -v -v 10000
```

### è¾“å‡ºæ–‡ä»¶
æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ï¼šD:\log\monkey_YYYYMMDD_HHMMSS.txt

æ–‡ä»¶åæ ¼å¼ï¼šmonkey_å¹´æœˆæ—¥_æ—¶åˆ†ç§’.txt

ç¤ºä¾‹ï¼šmonkey_20231215_143025.txt

### æ—¥å¿—æ ¼å¼
æ¯è¡Œæ—¥å¿—éƒ½åŒ…å«æ—¶é—´æˆ³ï¼š
```bash
[2023-12-15 14:30:25.123] Monkey: Start
[2023-12-15 14:30:25.456] Events injected: 100
[2023-12-15 14:30:25.789] Sending Touch (ACTION_DOWN): 0:(450.0,800.0)
```

## è„šæœ¬å‚æ•°è¯¦è§£
### é»˜è®¤ Monkey å‘½ä»¤å‚æ•°è¯´æ˜Ž
```bash
-p com.bailunsi.zh_consumer_mall    # æŒ‡å®šæµ‹è¯•çš„åŒ…å
--pct-touch 30                      # è§¦æ‘¸äº‹ä»¶å æ¯”30%
--ignore-crashes                    # å¿½ç•¥å´©æºƒ
--ignore-timeouts                   # å¿½ç•¥è¶…æ—¶
--pct-syskeys 0                     # ç³»ç»ŸæŒ‰é”®äº‹ä»¶å æ¯”0%
--throttle 250                      # äº‹ä»¶é—´éš”250ms
-s 2                                # éšæœºç§å­ä¸º2
-v -v -v                            # è¯¦ç»†è¾“å‡ºçº§åˆ«3
10000                               # æ‰§è¡Œ10000ä¸ªäº‹ä»¶
```
### æ³¨æ„äº‹é¡¹
1. ADB è¿žæŽ¥ï¼šç¡®ä¿è®¾å¤‡å·²é€šè¿‡ USB è¿žæŽ¥æˆ–æ— çº¿ ADB å·²è¿žæŽ¥

2. å­˜å‚¨è·¯å¾„ï¼šç¡®ä¿ D:\log ç›®å½•å­˜åœ¨ï¼Œæˆ–ä¿®æ”¹è„šæœ¬ä¸­çš„æ—¥å¿—è·¯å¾„

3. æƒé™ï¼šç¡®ä¿å¯¹æ—¥å¿—ç›®å½•æœ‰å†™å…¥æƒé™

4. å®žæ—¶æ€§ï¼šæ—¥å¿—å®žæ—¶å†™å…¥æ–‡ä»¶ï¼Œå³ä½¿ç¨‹åºå¼‚å¸¸é€€å‡ºä¹Ÿèƒ½ä¿ç•™å·²è®°å½•çš„æ—¥å¿—

### è‡ªå®šä¹‰é…ç½®
å¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­çš„ä»¥ä¸‹å˜é‡æ¥é€‚åº”ä½ çš„éœ€æ±‚ï¼š
```bash
# ä¿®æ”¹æ—¥å¿—æ–‡ä»¶è·¯å¾„
log_file = r'ä½ çš„è·¯å¾„\monkey_%s.txt' % datetime.datetime.now().strftime('%Y%m%d_%H%M%S')

# ä¿®æ”¹é»˜è®¤ Monkey å‘½ä»¤
cmd = sys.argv[1] if len(sys.argv) > 1 else 'ä½ çš„é»˜è®¤monkeyå‘½ä»¤'
```